<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pomelli | Estate Confections</title>

    <!-- FONTS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,400&family=Monsieur+La+Doulaise&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <style>
        /* ============================
           MOBILE-FIRST ARCHITECTURE
           ============================ */
        :root {
            --brand-cherry: #721121;
            --brand-cream: #F9F7F2;
            --brand-walnut: #2C2422;
            --brand-gold: #C0A062;
            --font-header: 'Cinzel', serif;
            --font-body: 'Cormorant Garamond', serif;
            --font-script: 'Monsieur La Doulaise', cursive;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            background-color: var(--brand-cream);
            color: var(--brand-walnut);
            font-family: var(--font-body);
            overflow-x: hidden;
            font-size: 18px; /* Readable on mobile */
            padding-bottom: 80px; /* Space for bottom nav */
        }

        /* --- IMAGES & LOGOS --- */
        img, video { width: 100%; display: block; object-fit: cover; }
        
        .logo-img {
            max-width: 180px;
            display: block;
            margin: 0 auto;
            /* Filter to ensure logo matches theme if it has a white bg, or mix-blend-mode */
            mix-blend-mode: multiply; 
        }

        /* --- TYPOGRAPHY --- */
        h1, h2, h3 { font-family: var(--font-header); letter-spacing: 0.05em; font-weight: 600; text-transform: uppercase; }
        .script-text { font-family: var(--font-script); font-size: 2.8rem; color: var(--brand-cherry); line-height: 1; }
        p { line-height: 1.6; margin-bottom: 15px; }

        /* --- BUTTONS (Thumb Friendly) --- */
        .btn-main {
            display: block; width: 100%;
            padding: 18px;
            background: var(--brand-cherry);
            color: white;
            text-align: center;
            font-family: var(--font-header);
            text-transform: uppercase;
            letter-spacing: 1px;
            border: none;
            cursor: pointer;
            margin-top: 15px;
            font-size: 1rem;
            box-shadow: 0 4px 10px rgba(114, 17, 33, 0.3);
            transition: transform 0.2s;
        }
        .btn-main:active { transform: scale(0.98); }

        .btn-outline {
            display: block; width: 100%;
            padding: 16px;
            background: transparent;
            border: 1px solid var(--brand-cherry);
            color: var(--brand-cherry);
            text-align: center;
            font-family: var(--font-header);
            cursor: pointer;
            margin-top: 10px;
        }

        /* --- NAVIGATION (Sticky Top + Slide Menu) --- */
        .mobile-nav {
            position: fixed; top: 0; left: 0; width: 100%; height: 70px;
            background: rgba(249, 247, 242, 0.95);
            backdrop-filter: blur(10px);
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 20px; z-index: 1000;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            transition: top 0.3s;
        }

        .nav-burger { font-size: 1.5rem; color: var(--brand-walnut); cursor: pointer; }
        .nav-logo-small { height: 40px; mix-blend-mode: multiply; }
        
        .cart-bubble { 
            position: relative; font-size: 1.5rem; color: var(--brand-cherry); cursor: pointer; 
        }
        .cart-count {
            position: absolute; top: -5px; right: -5px;
            background: var(--brand-walnut); color: white;
            font-size: 0.7rem; width: 18px; height: 18px;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
        }

        /* MENU DRAWER (Left Slide) */
        .menu-drawer {
            position: fixed; top: 0; left: -100%; width: 80%; height: 100vh;
            background: var(--brand-cream); z-index: 2000;
            transition: left 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
            padding: 40px; border-right: 1px solid #ddd;
        }
        .menu-drawer.active { left: 0; }
        .drawer-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 1500;
            opacity: 0; pointer-events: none; transition: 0.4s;
        }
        .drawer-overlay.active { opacity: 1; pointer-events: auto; }
        
        .menu-link { 
            font-family: var(--font-header); font-size: 1.5rem; margin-bottom: 25px; 
            display: block; text-decoration: none; color: var(--brand-walnut); 
            border-bottom: 1px solid rgba(0,0,0,0.05); padding-bottom: 10px;
        }

        /* --- HERO VIDEO SECTION --- */
        .hero-mobile {
            height: 80vh; position: relative; overflow: hidden;
            display: flex; align-items: flex-end; padding-bottom: 60px;
        }
        .hero-bg {
            position: absolute; top:0; left:0; width: 100%; height: 100%;
            object-fit: cover; z-index: -1;
            /* Filter allows white text to be readable */
            filter: brightness(0.6);
        }
        .hero-content {
            padding: 0 25px; text-align: center; width: 100%; color: white;
        }
        
        /* --- SECTION STYLING --- */
        .section-mobile { padding: 60px 20px; }
        .text-center { text-align: center; }

        /* --- PRODUCT CARDS (SCROLLABLE ON MOBILE) --- */
        .collection-slider {
            display: flex; overflow-x: auto; gap: 20px;
            padding: 10px 20px 40px 20px; /* Space for scroll */
            scroll-snap-type: x mandatory;
            scrollbar-width: none; /* Hide scrollbar Firefox */
        }
        .collection-slider::-webkit-scrollbar { display: none; }

        .product-card {
            flex: 0 0 85vw; /* 85% of screen width */
            scroll-snap-align: center;
            background: white;
            border-radius: 8px; /* Soft rounding, less tacky */
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0,0,0,0.08);
            position: relative;
        }

        .product-card img { height: 350px; }
        .card-body { padding: 25px; text-align: center; }
        .price { color: var(--brand-cherry); font-weight: bold; font-size: 1.2rem; margin: 10px 0; display: block;}
        
        /* --- STORYBOOK SECTION --- */
        .watercolor-box {
            background-image: url('https://rfwlaucrlfohxrrspxmx.supabase.co/storage/v1/object/public/pomelli-gallery/packaging-watercolor-woodland-art.jpg');
            background-size: cover; padding: 60px 25px;
            color: var(--brand-walnut); position: relative;
        }
        .watercolor-box::before {
            content: ''; position: absolute; inset:0; 
            background: rgba(255,255,255,0.9); z-index: 0; /* Fade image */
        }
        .wc-content { position: relative; z-index: 1; text-align: center; }

        /* --- PRODUCT MODAL (POP UP FROM BOTTOM) --- */
        .product-modal {
            position: fixed; bottom: -100%; left: 0; width: 100%; height: 90vh;
            background: white; z-index: 3000;
            border-radius: 20px 20px 0 0;
            transition: bottom 0.4s ease-out;
            overflow-y: auto;
            box-shadow: 0 -10px 40px rgba(0,0,0,0.2);
            padding-bottom: 100px; /* Space for sticky buy button */
        }
        .product-modal.active { bottom: 0; }

        .modal-header { position: relative; height: 300px; }
        .modal-close {
            position: absolute; top: 20px; right: 20px;
            width: 40px; height: 40px; background: white; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.5rem; cursor: pointer; z-index: 10;
        }

        .modal-content { padding: 30px 25px; }

        /* Ingredient Accordion */
        .accordion { margin-top: 30px; border-top: 1px solid #eee; }
        .acc-row {
            padding: 20px 0; border-bottom: 1px solid #eee;
            display: flex; justify-content: space-between; align-items: center; cursor: pointer;
        }
        .acc-details { display: none; padding-bottom: 20px; font-size: 0.95rem; color: #555; }
        .acc-details.open { display: block; animation: fadeDown 0.3s; }
        @keyframes fadeDown { from {opacity:0; transform:translateY(-10px);} to {opacity:1; transform:translateY(0);} }

        /* Sticky Footer for Buying */
        .modal-footer {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background: white; padding: 20px;
            border-top: 1px solid #eee; z-index: 3001;
            /* Hidden until modal active - dealt with in JS */
            display: none; 
        }

        /* --- CART MODAL --- */
        #cart-modal { background: #fdfdfd; z-index: 3005; }
    </style>
</head>
<body>

    <!-- OVERLAY for Menus -->
    <div class="drawer-overlay" id="overlay" onclick="closeMenus()"></div>

    <!-- 1. MOBILE HEADER -->
    <header class="mobile-nav" id="navbar">
        <i class="fa-solid fa-bars nav-burger" onclick="openMenu()"></i>
        
        <!-- MAIN LOGO -->
        <img src="images/pomelli-vintage-logo-script.jpg" class="nav-logo-small" alt="Pomelli">

        <div class="cart-bubble" onclick="openCart()">
            <i class="fa-solid fa-bag-shopping"></i>
            <span class="cart-count" id="cart-badge">0</span>
        </div>
    </header>

    <!-- 2. SLIDE-OUT MENU DRAWER -->
    <div class="menu-drawer" id="side-menu">
        <div style="text-align: center; margin-bottom: 40px;">
            <img src="images/pomelli-vintage-logo-script.jpg" style="width: 120px; margin: 0 auto; mix-blend-mode: multiply;">
        </div>
        <a href="#hero" class="menu-link" onclick="closeMenus()">The Estate</a>
        <a href="#collection" class="menu-link" onclick="closeMenus()">Patisserie Menu</a>
        <a href="#service" class="menu-link" onclick="closeMenus()">Butler Service</a>
        <a href="#folklore" class="menu-link" onclick="closeMenus()">The Packaging</a>
    </div>

    <!-- 3. HERO SECTION (Video) -->
    <section class="hero-mobile" id="hero">
        <video autoplay muted loop playsinline class="hero-bg">
            <source src="https://rfwlaucrlfohxrrspxmx.supabase.co/storage/v1/object/public/pomelli-gallery/asembeling%20carrot%20cake%20video.mp4" type="video/mp4">
        </video>
        <div class="hero-content">
            <h2 style="font-size: 1.1rem; opacity: 0.9; margin-bottom: 5px;">Cairo • Est 2024</h2>
            <h1 style="font-size: 2.8rem; margin-bottom: 20px;">The Winter<br>Collection</h1>
            <button class="btn-main" onclick="document.getElementById('collection').scrollIntoView({behavior:'smooth'})" style="background: white; color: var(--brand-walnut);">View The Menu</button>
        </div>
    </section>

    <!-- 4. BRAND INTRO (Text Depth) -->
    <section class="section-mobile text-center">
        <span class="script-text">High Society</span>
        <h2 style="margin: 10px 0;">Not just a Bakery</h2>
        <p style="font-size: 1.1rem; color: #555;">
            Pomelli is a gentleman's agreement between the sweet and the savory. 
            From the rumble of a vintage white roadster to the hush of service. 
            This is old-world dessert.
        </p>
    </section>

    <!-- 5. THE COLLECTION (Swipeable Gallery) -->
    <section id="collection" style="background: white; padding: 40px 0;">
        <div class="text-center" style="margin-bottom: 20px;">
            <h2>The Menu</h2>
            <p style="font-style: italic; color: #777;">Swipe to explore</p>
        </div>

        <div class="collection-slider">
            
            <!-- WHOLE CAKE -->
            <div class="product-card">
                <img src="https://rfwlaucrlfohxrrspxmx.supabase.co/storage/v1/object/public/pomelli-gallery/sovereign-carrot-cake-whole.jpg">
                <div class="card-body">
                    <h3>The Sovereign Gâteau</h3>
                    <span class="price">1,250 EGP</span>
                    <p style="font-size: 0.9rem;">The Grand Rectangular Tier (30x20cm)</p>
                    <button class="btn-outline" onclick="openProduct(1)">View & Order</button>
                </div>
            </div>

            <!-- SLICE -->
            <div class="product-card">
                <img src="https://rfwlaucrlfohxrrspxmx.supabase.co/storage/v1/object/public/pomelli-gallery/carrot-cake-slice-art-deco-plate.jpg">
                <div class="card-body">
                    <h3>The Salon Slice</h3>
                    <span class="price">140 EGP</span>
                    <p style="font-size: 0.9rem;">Gold-plated for one person.</p>
                    <button class="btn-outline" onclick="openProduct(2)">View & Order</button>
                </div>
            </div>

        </div>
    </section>

    <!-- 6. THE STORYBOOK PACKAGING -->
    <section class="watercolor-box" id="folklore">
        <div class="wc-content">
            <span class="script-text" style="color: var(--brand-walnut);">Beatrix Potter</span>
            <h2>Folklore Packaging</h2>
            <img src="https://rfwlaucrlfohxrrspxmx.supabase.co/storage/v1/object/public/pomelli-gallery/vintage-storybook-illustration-wide.jpg" 
                 style="width: 100%; border: 4px solid white; margin: 20px 0; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
            <p>
                We do not use plastic. Your confection arrives in a box adorned with watercolor scenes of the woodland. 
                Reminiscent of a nursery rhyme found in an attic chest.
            </p>
        </div>
    </section>

    <!-- 7. THE SERVICE SECTION -->
    <section class="section-mobile" id="service">
        <img src="https://rfwlaucrlfohxrrspxmx.supabase.co/storage/v1/object/public/pomelli-gallery/butler-service-caramel-drip.jpg" 
             style="border-radius: 8px; margin-bottom: 20px;">
        <h2 style="color: var(--brand-cherry);">Service à la Russe</h2>
        <p>
            For select estates in Zamalek, Maadi, and New Cairo, we offer white-glove setup. 
            Allow our staff to plate the gâteau tableside with warm salted butterscotch.
        </p>
        <button class="btn-main" onclick="openProduct(3)">Inquire about Service</button>
    </section>

    <!-- 8. THE INTERIOR (VIBE CHECK) -->
    <img src="https://rfwlaucrlfohxrrspxmx.supabase.co/storage/v1/object/public/pomelli-gallery/carrot-cake-manor-interior.jpg" style="height: 50vh; width: 100%; object-fit: cover;">


    <!-- ==========================
         INTERACTIVE MODALS
         ========================== -->

    <!-- PRODUCT DETAIL POP-UP (Hidden by default) -->
    <div class="product-modal" id="p-modal">
        <div class="modal-header">
            <div class="modal-close" onclick="closeProduct()">&times;</div>
            <img src="" id="pm-img" style="height: 100%; width: 100%; object-fit: cover;">
        </div>
        
        <div class="modal-content">
            <h1 id="pm-title" style="font-size: 2rem; margin-bottom: 10px;">Title</h1>
            <span id="pm-price" style="font-size: 1.5rem; color: var(--brand-cherry); font-weight: bold;">0 EGP</span>
            <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">
            
            <p id="pm-desc" style="font-size: 1.1rem; color: #444;">Description goes here.</p>

            <!-- Interactive Details -->
            <div class="accordion">
                <div class="acc-row" onclick="toggleAcc(this)">
                    <span><i class="fa-solid fa-wheat-awn" style="margin-right:10px; color:var(--brand-gold);"></i>Flavor Profile</span>
                    <i class="fa-solid fa-chevron-down"></i>
                </div>
                <div class="acc-details">
                    <p><strong>Nuts & Salt:</strong> Oven-candied pecans provide a distinct crunch, balanced by house-made salted butterscotch.</p>
                    <p><strong>Frosting:</strong> We brown the butter first to create a deep, hazelnut aroma in the cream cheese.</p>
                </div>

                <div class="acc-row" onclick="toggleAcc(this)">
                    <span><i class="fa-solid fa-ruler-combined" style="margin-right:10px; color:var(--brand-gold);"></i>Dimensions</span>
                    <i class="fa-solid fa-chevron-down"></i>
                </div>
                <div class="acc-details">
                    <p id="pm-dims">Standard serving size.</p>
                </div>
            </div>

            <!-- Whitespace at bottom so text isn't covered by button -->
            <div style="height: 80px;"></div>
        </div>
        
        <!-- Sticky Buy Button inside Modal -->
        <div class="modal-footer" id="pm-footer" style="display:block;">
            <button class="btn-main" id="pm-buy-btn" onclick="">Add to Order</button>
        </div>
    </div>

    <!-- CART MODAL -->
    <div class="product-modal" id="cart-modal">
        <div class="modal-header" style="height: auto; background: var(--brand-cream); padding: 20px;">
            <div class="modal-close" style="top: 10px;" onclick="toggleCartModal()">&times;</div>
            <h2>Your Trunk</h2>
        </div>
        <div class="modal-content" id="cart-content">
            <p style="text-align:center; padding: 40px; color: #999;">The trunk is empty.</p>
        </div>
        <div class="modal-footer" style="display: block;">
             <div style="display:flex; justify-content:space-between; margin-bottom: 15px; font-weight: bold;">
                 <span>Total:</span>
                 <span id="cart-total-display">0 EGP</span>
             </div>
             <!-- CAIRO INPUTS -->
             <input type="text" id="cust-name" placeholder="Your Name" style="width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ccc;">
             <input type="text" id="cust-address" placeholder="Cairo Address (e.g. 5 Zamalek St.)" style="width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ccc;">
             
             <button class="btn-main" onclick="sendWhatsApp()">Confirm via WhatsApp</button>
        </div>
    </div>


    <!-- ==========================
         LOGIC SCRIPT
         ========================== -->
    <script>
        // --- DATA ---
        const products = [
            {
                id: 1,
                title: "The Sovereign Gâteau",
                price: 1250,
                desc: "The Masterpiece. A grand rectangular tier (A4 dimensions / 30x20cm). Constructed of three dense layers of heritage carrot sponge, separated by browned-butter cream cheese and pools of salted butterscotch. A 'Pecan Surprise' at every bite.",
                dims: "Rectangular 30cm x 21cm (Serves 12-16)",
                img: "https://rfwlaucrlfohxrrspxmx.supabase.co/storage/v1/object/public/pomelli-gallery/sovereign-carrot-cake-whole.jpg"
            },
            {
                id: 2,
                title: "The Salon Slice",
                price: 140,
                desc: "A single, generous cut of the Sovereign. Perfect for a solitary moment of luxury or a paired tea service. Drizzled fresh with caramel.",
                dims: "Single Portion (Large)",
                img: "https://rfwlaucrlfohxrrspxmx.supabase.co/storage/v1/object/public/pomelli-gallery/carrot-cake-slice-art-deco-plate.jpg"
            },
            {
                id: 3,
                title: "Service à la Russe",
                price: 350,
                desc: "Our Butler Service setup fee. Does not include cake cost. We provide plates, silver, warm sauce tableside, and cleanup.",
                dims: "Event Based (Cairo Only)",
                img: "https://rfwlaucrlfohxrrspxmx.supabase.co/storage/v1/object/public/pomelli-gallery/butler-service-caramel-drip.jpg"
            }
        ];

        let cart = [];

        // --- UI FUNCTIONS ---

        function openMenu() {
            document.getElementById('side-menu').classList.add('active');
            document.getElementById('overlay').classList.add('active');
        }

        function closeMenus() {
            document.getElementById('side-menu').classList.remove('active');
            document.getElementById('overlay').classList.remove('active');
        }

        function toggleAcc(header) {
            const detail = header.nextElementSibling;
            detail.classList.toggle('open');
            header.querySelector('.fa-chevron-down').classList.toggle('fa-chevron-up');
        }

        // --- PRODUCT MODAL LOGIC ---
        
        function openProduct(id) {
            const p = products.find(x => x.id === id);
            
            // Populate Data
            document.getElementById('pm-img').src = p.img;
            document.getElementById('pm-title').innerText = p.title;
            document.getElementById('pm-price').innerText = p.price + " EGP";
            document.getElementById('pm-desc').innerText = p.desc;
            document.getElementById('pm-dims').innerText = p.dims;

            // Set Buy Button logic
            document.getElementById('pm-buy-btn').onclick = function() { addToCart(id); };

            // Show Modal
            document.getElementById('p-modal').classList.add('active');
            document.getElementById('pm-footer').style.display = 'block'; // Ensure footer visible
        }

        function closeProduct() {
            document.getElementById('p-modal').classList.remove('active');
        }

        // --- CART LOGIC ---

        function addToCart(id) {
            const p = products.find(x => x.id === id);
            cart.push(p);
            updateCartDisplay();
            closeProduct();
            alert(p.title + " added to Trunk");
        }

        function openCart() {
             renderCartItems();
             document.getElementById('cart-modal').classList.add('active');
        }

        function toggleCartModal() {
            document.getElementById('cart-modal').classList.toggle('active');
        }

        function updateCartDisplay() {
            document.getElementById('cart-badge').innerText = cart.length;
        }

        function renderCartItems() {
            const container = document.getElementById('cart-content');
            if(cart.length === 0) {
                container.innerHTML = '<p style="text-align:center; padding: 40px; color: #999;">The trunk is empty.</p>';
                document.getElementById('cart-total-display').innerText = "0 EGP";
                return;
            }

            let total = 0;
            let html = "";
            
            cart.forEach((item, index) => {
                total += item.price;
                html += `
                <div style="display:flex; margin-bottom: 20px; border-bottom: 1px solid #eee; padding-bottom: 10px;">
                    <img src="${item.img}" style="width: 60px; height: 60px; object-fit: cover; border-radius: 4px;">
                    <div style="margin-left: 15px;">
                        <h4>${item.title}</h4>
                        <div style="color: var(--brand-cherry);">${item.price} EGP</div>
                        <div style="font-size:0.8rem; text-decoration: underline; color: #999;" onclick="removeCart(${index})">Remove</div>
                    </div>
                </div>`;
            });

            container.innerHTML = html;
            document.getElementById('cart-total-display').innerText = total + " EGP";
        }

        function removeCart(index) {
            cart.splice(index, 1);
            updateCartDisplay();
            renderCartItems();
        }

        // --- WHATSAPP CHECKOUT ---
        function sendWhatsApp() {
            if(cart.length === 0) return;
            
            const name = document.getElementById('cust-name').value;
            const address = document.getElementById('cust-address').value;

            if(!name || !address) {
                alert("Please provide Name & Address for the butler.");
                return;
            }

            let msg = `*ORDER FROM POMELLI APP*%0aCustomer: ${name}%0aAddress: ${address}%0a%0a`;
            let total = 0;
            
            cart.forEach(item => {
                msg += `- ${item.title} (${item.price} EGP)%0a`;
                total += item.price;
            });
            
            msg += `%0a*TOTAL: ${total} EGP*`;

            window.open(`https://wa.me/201024274466?text=${msg}`, '_blank');
        }

    </script>
</body>
</html>
