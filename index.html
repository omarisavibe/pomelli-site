<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pomelli | The Estate Confectionery</title>
    
    <!-- SUPABASE CONNECTION -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- FONTS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,400&family=Monsieur+La+Doulaise&display=swap" rel="stylesheet">
    <!-- ICONS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- 1. THE PALETTE (1920s + CHERRY + WALNUT) --- */
        :root {
            --walnut: #120A08;       /* Deepest Black-Brown */
            --cherry: #780C1B;       /* VINTAGE OPERA RED */
            --gold: #D4AF37;         /* METALLIC GOLD */
            --cream: #F5F1E6;        /* HIGH SOCIETY PAPER */
            --watercolor: #fdfbf7;   /* STORYBOOK PAPER */
            --text-dark: #1a1a1a;
        }

        /* --- 2. GLOBAL RESET & TYPOGRAPHY --- */
        * { box-sizing: border-box; scroll-behavior: smooth; margin: 0; padding: 0; }

        body {
            background-color: var(--walnut);
            color: var(--cream);
            font-family: 'Cormorant Garamond', serif;
            font-size: 18px;
            overflow-x: hidden;
        }

        h1, h2, h3, h4, button, .nav-link {
            font-family: 'Cinzel', serif;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .script-font {
            font-family: 'Monsieur La Doulaise', cursive;
            color: var(--cherry);
            font-size: 4rem;
            line-height: 0.8;
            margin-bottom: 10px;
        }

        /* --- 3. NAVIGATION (STICKY & GOLD) --- */
        nav {
            position: fixed;
            top: 0; left: 0; width: 100%;
            height: 90px;
            background: rgba(18, 10, 8, 0.95); /* Walnut with transparency */
            border-bottom: 2px solid var(--gold);
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 50px;
        }

        .logo-text { font-size: 1.8rem; color: var(--gold); font-weight: 700; letter-spacing: 5px; }
        .logo-img { height: 60px; filter: invert(1); } /* Invert logo to be white/gold if it's black */

        .nav-actions { display: flex; gap: 30px; align-items: center; }
        
        .cart-btn {
            background: transparent; border: 1px solid var(--gold);
            color: var(--gold); padding: 10px 20px;
            cursor: pointer; transition: 0.3s;
            display: flex; gap: 10px; align-items: center;
        }
        .cart-btn:hover { background: var(--cherry); border-color: var(--cherry); color: white; }

        /* --- 4. HERO SECTION (VIDEO BACKGROUND) --- */
        .hero {
            height: 100vh;
            width: 100%;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            overflow: hidden;
            border-bottom: 8px solid var(--cherry);
        }

        /* THE VIDEO FIX */
        .hero video {
            position: absolute;
            top: 50%; left: 50%;
            min-width: 100%; min-height: 100%;
            width: auto; height: auto;
            transform: translate(-50%, -50%);
            z-index: -2;
            object-fit: cover;
            filter: brightness(0.5) contrast(1.1); /* Darken so text pops */
        }

        .hero-overlay {
            z-index: 1;
            padding: 40px;
            border: 1px solid rgba(212, 175, 55, 0.4); /* Faint gold border */
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(2px);
            max-width: 800px;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin: 20px 0;
            color: white;
            text-shadow: 0 4px 20px rgba(0,0,0,1);
        }

        .hero p { font-size: 1.4rem; font-style: italic; color: var(--gold); }

        /* --- 5. THE RECIPE / LAYERING DETAIL --- */
        .anatomy-section {
            padding: 100px 5vw;
            background-color: var(--walnut);
            display: flex;
            flex-wrap: wrap;
            gap: 60px;
            align-items: center;
        }

        .anatomy-text { flex: 1; min-width: 400px; }
        .anatomy-image { 
            flex: 1; min-width: 400px; 
            border: 10px solid var(--cherry); 
            box-shadow: 20px 20px 0 var(--gold);
        }
        .anatomy-image img { width: 100%; display: block; }

        .layer-list { list-style: none; margin-top: 40px; border-left: 2px solid var(--gold); padding-left: 30px; }
        .layer-list li { margin-bottom: 25px; position: relative; }
        .layer-list li::before {
            content: '◆'; position: absolute; left: -39px; top: 0; color: var(--cherry); font-size: 1.2rem;
        }
        .layer-title { display: block; font-family: 'Cinzel'; color: var(--gold); font-size: 1.1rem; margin-bottom: 5px; }

        /* --- 6. THE STORYBOOK PACKAGING (The "Watercolor Stuff") --- */
        .storybook-section {
            background-color: var(--watercolor); /* Light paper color */
            color: var(--text-dark); /* Dark text for contrast */
            padding: 100px 5vw;
            text-align: center;
            background-image: url('https://www.transparenttextures.com/patterns/cream-paper.png'); /* Paper Texture */
            position: relative;
        }

        /* A decorative separator to separate the walnut luxury from the watercolor whimsy */
        .storybook-section::before {
            content: '';
            position: absolute; top: -10px; left: 0; width: 100%; height: 20px;
            background: repeating-linear-gradient(45deg, var(--gold), var(--gold) 10px, var(--cherry) 10px, var(--cherry) 20px);
        }

        .watercolor-grid {
            display: flex; gap: 40px; margin-top: 60px; justify-content: center; align-items: center;
        }

        .watercolor-card {
            background: white;
            padding: 20px;
            border: 1px solid #ddd;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            max-width: 500px;
            text-align: left;
        }
        
        .illustration-box {
            width: 100%; height: 300px; background: #eaeaea; 
            overflow: hidden; margin-bottom: 20px; border-bottom: 3px solid var(--cherry);
        }
        
        .illustration-box img { width: 100%; height: 100%; object-fit: cover; }

        /* --- 7. THE SHOP (Functional) --- */
        .shop-section {
            padding: 100px 5vw;
            background: linear-gradient(to bottom, var(--walnut), #000);
            text-align: center;
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 50px;
            margin-top: 60px;
        }

        .product-card {
            background: white;
            color: black;
            transition: 0.4s ease;
            position: relative;
            overflow: hidden;
        }
        .product-card:hover { transform: translateY(-10px); }

        .card-img { height: 400px; overflow: hidden; position: relative; }
        .card-img img { width: 100%; height: 100%; object-fit: cover; transition: 1s; }
        .product-card:hover .card-img img { transform: scale(1.1); }

        .card-info { padding: 30px; border-top: 5px solid var(--gold); }
        .price { font-size: 1.5rem; color: var(--cherry); font-weight: bold; font-family: 'Cinzel'; margin: 10px 0; }

        .buy-btn {
            width: 100%; padding: 15px; border: 2px solid var(--walnut); background: none;
            font-family: 'Cinzel'; font-weight: bold; cursor: pointer; transition: 0.3s; margin-top: 15px;
        }
        .buy-btn:hover { background: var(--cherry); color: white; border-color: var(--cherry); }

        /* --- 8. THE CART DRAWER --- */
        .drawer {
            position: fixed; top: 0; right: -450px;
            width: 450px; height: 100vh;
            background: var(--cream); color: var(--walnut);
            z-index: 2000; box-shadow: -10px 0 50px black;
            transition: 0.5s cubic-bezier(0.77, 0.2, 0.05, 1.0);
            display: flex; flex-direction: column;
            border-left: 10px solid var(--cherry);
        }
        .drawer.open { right: 0; }
        
        .drawer-header { padding: 30px; background: var(--walnut); color: var(--gold); display: flex; justify-content: space-between; align-items: center;}
        .drawer-body { flex: 1; padding: 30px; overflow-y: auto; }
        .drawer-footer { padding: 30px; background: white; border-top: 1px solid #ccc; }

        .drawer-item { display: flex; gap: 20px; margin-bottom: 20px; border-bottom: 1px solid #ddd; padding-bottom: 20px; }
        .drawer-item img { width: 80px; height: 80px; object-fit: cover; border: 1px solid var(--gold); }
        
        .checkout-cta { width: 100%; background: var(--cherry); color: white; border: none; padding: 20px; font-size: 1.2rem; cursor: pointer; }

    </style>
</head>
<body>

    <!-- NAVIGATION -->
    <nav>
        <span class="logo-text">POMELLI</span>
        <!-- Optional: Use your image logo instead of text above -->
        <!-- <img src="pomelli-vintage-logo-script.jpg" class="logo-img" alt="Pomelli"> -->
        
        <div class="nav-actions">
            <button class="cart-btn" onclick="toggleDrawer()">
                <i class="fa-solid fa-briefcase"></i> 
                <span>Your Trunk (<span id="cart-count">0</span>)</span>
            </button>
        </div>
    </nav>

    <!-- DRAWER / CART -->
    <div class="drawer" id="cart-drawer">
        <div class="drawer-header">
            <h3>Current Selection</h3>
            <i class="fa-solid fa-xmark" style="cursor: pointer; font-size: 1.5rem;" onclick="toggleDrawer()"></i>
        </div>
        <div class="drawer-body" id="cart-body">
            <p style="font-style: italic; opacity: 0.7;">Your trunk is currently empty, madame.</p>
        </div>
        <div class="drawer-footer">
            <div style="display:flex; justify-content: space-between; font-size: 1.5rem; margin-bottom: 15px; font-family:'Cinzel';">
                <span>Total:</span>
                <span id="cart-total">$0.00</span>
            </div>
            <button class="checkout-cta" onclick="alert('Redirecting to secure concierge checkout...')">Arrange Delivery</button>
        </div>
    </div>

    <!-- HERO SECTION: VIDEO IS BACK -->
    <section class="hero">
        <video autoplay muted loop playsinline>
            <source src="https://rfwlaucrlfohxrrspxmx.supabase.co/storage/v1/object/public/pomelli-gallery/asembeling%20carrot%20cake%20video.mp4" type="video/mp4">
        </video>
        <div class="hero-overlay">
            <span class="script-font" style="color: var(--cream);">High Society Flavor</span>
            <h1>The A4 Sovereign Cake</h1>
            <p>Oven-Candied Pecans • Brown Butter Silk • Salted Butterscotch</p>
        </div>
    </section>

    <!-- ANATOMY OF THE CAKE SECTION (Your Specific Detail) -->
    <section class="anatomy-section">
        <div class="anatomy-image">
            <img src="https://rfwlaucrlfohxrrspxmx.supabase.co/storage/v1/object/public/pomelli-gallery/sovereign-carrot-cake-whole.jpg" alt="The Whole A4 Cake">
        </div>
        <div class="anatomy-text">
            <span class="script-font">Construction</span>
            <h2 style="color: var(--gold); margin-bottom: 20px;">The Anatomy of a Slice</h2>
            <p>Not a mere dessert, but a rectangular A4 masterpiece of engineering. A three-layered triumph designed for the true epicurean.</p>
            
            <ul class="layer-list">
                <li>
                    <span class="layer-title">I. The Foundation</span>
                    Heritage spiced carrot sponge, dense yet crumbly, providing the structural integrity for what follows.
                </li>
                <li>
                    <span class="layer-title">II. The Binding</span>
                    A generous slathering of <strong>Brown Butter Cream Cheese Frosting</strong>. Not too sweet, but deeply nutty and rich.
                </li>
                <li>
                    <span class="layer-title">III. The "Surprise"</span>
                    Here lies the magic: A flowing river of amber <strong>Salted Butterscotch Sauce</strong>, concealing a crunch of oven-candied pecans.
                </li>
                <li>
                    <span class="layer-title">IV. The Repetition</span>
                    We repeat this architecture twice more. Cake. Frosting. Sauce. Pecans.
                </li>
                <li>
                    <span class="layer-title">V. The Crown</span>
                    Finished with a final thin veil of frosting, flooded with butterscotch, and piled high with candied nuts. A pecan surprise in every single bite.
                </li>
            </ul>
        </div>
    </section>

    <!-- PACKAGING SECTION (The Watercolor / Beatrix Vibe) -->
    <section class="storybook-section">
        <span class="script-font">Beatrix & The Box</span>
        <h2>A Gift From The Garden</h2>
        <div style="width: 100px; height: 3px; background: var(--cherry); margin: 20px auto;"></div>
        <p style="max-width: 600px; margin: 0 auto; line-height: 1.8;">
            While the flavors recall the grandeur of the ballroom, the packaging whispers of the nursery. 
            We do not use standard cardboard. Your confection arrives in a box adorned with 
            <strong style="color: var(--cherry);">vintage watercolor woodland illustrations</strong>.
        </p>

        <div class="watercolor-grid">
            <div class="watercolor-card">
                <div class="illustration-box">
                    <!-- Simulate the packaging using the Manor/Interior shot which implies the setting -->
                    <img src="https://rfwlaucrlfohxrrspxmx.supabase.co/storage/v1/object/public/pomelli-gallery/carrot-cake-manor-interior.jpg" alt="Vintage Interior">
                </div>
                <h3>The Presentation</h3>
                <p style="font-size: 0.9rem; margin-top: 10px;">Unboxing feels like opening a vintage storybook found in an estate attic. A collision of Beaux-Arts glamour and pastoral nostalgia.</p>
            </div>
        </div>
    </section>

    <!-- SHOPPING SECTION -->
    <section class="shop-section">
        <span class="script-font">The Provisioning Room</span>
        <h2 style="color: white;">Secure Your Allocation</h2>
        
        <div class="product-grid" id="grid">
            <!-- DYNAMIC CONTENT FILLED BY JS BELOW -->
        </div>
    </section>

    <!-- FOOTER -->
    <footer style="background: black; padding: 40px; text-align: center; border-top: 2px solid var(--cherry);">
        <span class="logo-text" style="font-size: 1rem;">POMELLI © 1922</span>
    </footer>

    <!-- JAVASCRIPT LOGIC (Internal for single-file ease) -->
    <script>
        /* --- 1. DATA (INVENTORY) --- */
        const inventory = [
            {
                id: 1,
                title: "The Sovereign A4 Gâteau",
                desc: "The flagship. Three layers. A4 size. Loaded with butterscotch and oven-candied pecans.",
                price: 135.00,
                img: "https://rfwlaucrlfohxrrspxmx.supabase.co/storage/v1/object/public/pomelli-gallery/sovereign-carrot-cake-whole.jpg"
            },
            {
                id: 2,
                title: "Tableside Slice Service",
                desc: "Single plating on art-deco china. The 'Pecan Surprise' experience for one.",
                price: 22.00,
                img: "https://rfwlaucrlfohxrrspxmx.supabase.co/storage/v1/object/public/pomelli-gallery/carrot-cake-slice-art-deco-plate.jpg"
            },
            {
                id: 3,
                title: "Butler Service à la Russe",
                desc: "We bring the sauce, the silver, and the white gloves to your private estate.",
                price: 450.00,
                img: "https://rfwlaucrlfohxrrspxmx.supabase.co/storage/v1/object/public/pomelli-gallery/butler-service-caramel-drip.jpg"
            }
        ];

        let cart = [];

        /* --- 2. RENDER SHOP --- */
        const grid = document.getElementById('grid');
        
        inventory.forEach(item => {
            const card = document.createElement('div');
            card.className = 'product-card';
            card.innerHTML = `
                <div class="card-img">
                    <img src="${item.img}" alt="${item.title}">
                </div>
                <div class="card-info">
                    <h3>${item.title}</h3>
                    <p style="font-size: 0.9rem; margin: 10px 0;">${item.desc}</p>
                    <div class="price">$${item.price.toFixed(2)}</div>
                    <button class="buy-btn" onclick="addToCart(${item.id})">Add to Trunk</button>
                </div>
            `;
            grid.appendChild(card);
        });

        /* --- 3. CART FUNCTIONS --- */
        function addToCart(id) {
            const product = inventory.find(p => p.id === id);
            cart.push(product);
            updateCartUI();
            
            const drawer = document.getElementById('cart-drawer');
            drawer.classList.add('open');
        }

        function updateCartUI() {
            // Count
            document.getElementById('cart-count').innerText = cart.length;
            
            // Total
            const total = cart.reduce((sum, item) => sum + item.price, 0);
            document.getElementById('cart-total').innerText = "$" + total.toFixed(2);

            // Render Body
            const body = document.getElementById('cart-body');
            if (cart.length === 0) {
                body.innerHTML = '<p style="font-style: italic; opacity: 0.7;">Your trunk is currently empty, madame.</p>';
                return;
            }

            body.innerHTML = cart.map(item => `
                <div class="drawer-item">
                    <img src="${item.img}" alt="thumb">
                    <div>
                        <div style="font-family:'Cinzel'; margin-bottom: 5px;">${item.title}</div>
                        <div style="color: var(--cherry);">$${item.price.toFixed(2)}</div>
                    </div>
                </div>
            `).join('');
        }

        function toggleDrawer() {
            const drawer = document.getElementById('cart-drawer');
            drawer.classList.toggle('open');
        }

    </script>
</body>
</html>
